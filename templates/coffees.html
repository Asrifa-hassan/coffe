{% include 'header.html' %}
{% load static %}
{% block content %}

<div class="coffee_section py-5">
  <div class="container">
    <div class="row mb-4">
      <div class="col-md-12 text-center">
        <h1 class="coffee_taital">OUR COFFEE OFFER</h1>
      </div>
    </div>

    <div class="row">
      {% for i in data %}
      <div class="col-md-4 col-sm-6 mb-4 d-flex">
        <div class="card coffee-card h-100 w-100">
          <img src="{{ i.image.url }}" alt="{{ i.item_name }}" class="card-img-top">
          <div class="card-body text-center d-flex flex-column">
            <h5 class="card-title">{{ i.item_name }}</h5>
            <p class="card-text flex-grow-1">{{ i.description|truncatewords:20 }}</p>
            <h4 class="price">â‚¹{{ i.price }}</h4>

            {% if user.is_authenticated %}
              <a href="{% url 'add_to_cart' i.id %}" class="btn btn-coffee mt-auto">Add to Cart</a>
            {% else %}
              <a href="{% url 'login_page' %}" class="btn btn-coffee mt-auto">Login to Add</a>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
        <div class="col-md-12 text-center">
          <p>No coffee items available right now.</p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/swiper-bundle.min.js' %}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    new Swiper(".swiper", {
      loop: true,
      spaceBetween: 10,
      pagination: { el: ".swiper-pagination", clickable: true },
      breakpoints: {
        320: { slidesPerView: 1, spaceBetween: 10 },   // mobile
        768: { slidesPerView: 2, spaceBetween: 20 },   // tablet
        1024: { slidesPerView: 3, spaceBetween: 30 },  // desktop
      }
    });
  });
</script>

{% endblock %}
